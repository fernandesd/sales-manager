{"version":3,"sources":["webpack:///./resources/js/site.js"],"names":["$","tooltip","document","ready","url","productContainer","cartContainer","template","fetch","then","response","json","data","forEach","item","image_url","name","price","slug","html","click","e","preventDefault","currentTarget","dataset","method","headers","res","alert","message","total","index","Number","quantity","toFixed","delivery_time","text","location","reload","body","JSON","stringify","DataTable","ajax","columns","on","vendaId","row","this","parents","id","items","Swal","fire"],"mappings":"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","file":"/js/site.js","sourcesContent":["$(function () {\n    $('[data-toggle=\"tooltip\"]').tooltip()\n})\n\n$(document).ready(function () {\n    const url = 'https://vx.bolty.cc/api/v0';\n    let productContainer = $('.products-container');\n    let cartContainer = $('.cart-container');\n    let template = '';\n    fetch(`${url}/produtos`).then(response => {\n        response.json()\n            .then(data => {\n                data.data.forEach(item => {\n                    template += `\n                        <div class=\"col\">\n                        <div class=\"card\">\n                            <img src=\"${item.image_url}\" class=\"card-img-top\" alt=\"${item.name}\">\n                            <div class=\"card-body\">\n                                <h5 class=\"card-title\">${item.name}</h5>\n                                <p class=\"card-text d-flex justify-content-between\">RS ${item.price} <a href><span class=\"cartAdd\" data-slug=\"${item.slug}\" data-toggle=\"tooltip\" data-placement=\"top\" title=\"Adicionar ao carrinho\"> <i class=\"fas fa-cart-plus\"></i> </span></a></p>\n                            </div>\n                        </div>\n                    </div>\n        `\n                });\n\n                productContainer.html(template);\n                template = '';\n\n\n\n                const cartAdd = $('.cartAdd');\n                cartAdd.click((e) => {\n                    e.preventDefault();\n                    fetch(`${url}/carrinho/adicionar/${e.currentTarget.dataset.slug}`, {\n                        method: 'post',\n                        headers: {\n                            'Accept': 'application/json, text/plain, */*',\n                            'Content-Type': 'application/json'\n                        },\n                    }).then(res => res.json())\n                        .then(res => {\n                            alert(res.message);\n                        });\n                });\n            });\n    });\n\n    fetch(`${url}/carrinho`).then(response => {\n        response.json()\n            .then(data => {\n                let total = 0;\n                data.data.forEach((item, index) => {\n                    total += Number((item.price * item.quantity).toFixed(2));\n                    template += `\n                    <li class=\"list-group-item border-0\">Produto: ${item.name}</li>\n                    <li class=\"list-group-item border-0\">Preço: ${item.price}</li>\n                    <li class=\"list-group-item border-0\">Quantidade: ${item.quantity}</li>\n                    <li class=\"list-group-item border-0\">Tempo de entrega: ${item.delivery_time} dias</li>\n                    <li class=\"list-group-item border-0\">Total: ${(item.price * item.quantity).toFixed(2)}</li>\n                    <span>\n                    <a class=\"btn btn-outline-danger btn-sm remove-cart-btn\" href=\"#\" role=\"button\" data-index=\"${index}\"><i class=\"fas fa-trash-alt\"></i></a>\n                    </span>\n                    <hr/>\n                    `\n                });\n\n                $('.total-carrinho').text('Total: ' + total.toFixed(2));\n                cartContainer.html(template);\n                template = '';\n\n                const rmCart = $('.remove-cart-btn');\n                rmCart.click((e) => {\n                    e.preventDefault();\n                    fetch(`${url}/carrinho/remover/${e.currentTarget.dataset.index}`, {\n                        method: 'delete',\n                        headers: {\n                            'Accept': 'application/json, text/plain, */*',\n                            'Content-Type': 'application/json'\n                        },\n                    }).then(res => res.json())\n                        .then(res => {\n                            alert(res.message);\n                            document.location.reload(true);\n                        });\n                });\n            });\n    });\n\n\n    const saleCreate = $('.saleCreate');\n    saleCreate.click((e) => {\n        e.preventDefault();\n\n        fetch(`${url}/carrinho`).then(response => {\n            response.json()\n                .then(data => {\n                    fetch(`${url}/vendas/criar`, {\n                        method: 'post',\n                        headers: {\n                            'Accept': 'application/json, text/plain, */*',\n                            'Content-Type': 'application/json'\n                        },\n                        body: JSON.stringify({ 'items': data.data })\n                    }).then(res => res.json())\n                        .then(res => {\n                            alert(res.message);\n                            document.location.reload(true);\n                        });\n                });\n\n        });\n    });\n\n    const table = $('#myTable').DataTable({\n        ajax: `${url}/vendas`,\n        columns: [\n            { data: 'id' },\n            { data: 'created_at' },\n            { data: 'total_cost' },\n            { data: 'max_delivery_time' },\n            { data: '' }\n        ],\n        \"columnDefs\": [{\n            \"targets\": -1,\n            \"data\": null,\n            \"defaultContent\": '<button class=\"btn btn-info btn-sm\"><i class=\"far fa-eye\"></i></button>'\n        }]\n    });\n\n    $('#myTable tbody').on('click', 'button', function (e) {\n        const vendaId = $('#myTable').DataTable().row($(this).parents('tr')).data().id;\n\n        fetch(`${url}/vendas/${vendaId}`).then(response => {\n            response.json()\n                .then(data => {\n                    data.data.items.forEach(item => {\n                        template += `\n                        <li class=\"list-group-item border-0\">Produto: ${item.name}</li>\n                        <li class=\"list-group-item border-0\">Preço: ${item.price}</li>\n                        <li class=\"list-group-item border-0\">Quantidade: ${item.quantity}</li>\n                        <li class=\"list-group-item border-0\">Tempo de entrega: ${item.delivery_time} dias</li>\n                        <li class=\"list-group-item border-0\">Total: ${(item.price * item.quantity).toFixed(2)}</li>\n                        <hr/>`\n                    });\n                    Swal.fire({\n                        html: template\n                      });\n                });\n            });\n        });\n    });\n"],"sourceRoot":""}